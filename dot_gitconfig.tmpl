# =============================================================================
# Git 全局配置 (chezmoi 模板)
#
# 模板变量:
#   .chezmoi.hostname  - 当前主机名 ({{ .chezmoi.hostname }})
#   .chezmoi.os        - 操作系统 ({{ .chezmoi.os }})
#   .is_server         - 是否为服务器 ({{ .is_server }})
#   .is_work           - 是否为工作电脑 ({{ .is_work }})
#
# 使用说明:
#   - 此文件是模板，会根据不同机器生成不同配置
#   - 修改请使用: chezmoi edit ~/.gitconfig
# =============================================================================

[user]
	name = francismiko
	email = 1485059943@qq.com
	# SSH 签名密钥 (Secretive 管理)
	# 动态从 Secretive 读取当前机器的公钥 (取第一个)
	signingkey = key::{{ output "sh" "-c" (printf "SSH_AUTH_SOCK=%s/Library/Containers/com.maxgoedjen.Secretive.SecretAgent/Data/socket.ssh ssh-add -L | head -n1" .chezmoi.homeDir) | trim }}

[commit]
	gpgsign = true

[gpg]
	format = ssh

[gpg "ssh"]
	allowedSignersFile = ~/.gitallowedsigners
	program = ~/.local/bin/ssh-secretive

[pull]
	rebase = false

[merge]
	conflictstyle = diff3

# Delta - 现代化 diff 工具
[core]
	pager = delta

[interactive]
	diffFilter = delta --color-only

[delta]
	navigate = true
	light = false
	line-numbers = true
	side-by-side = false
	syntax-theme = Monokai Extended

[diff]
	colorMoved = default

# 安全防护配置
[advice]
	statusHints = true
	pushUpdateRejected = true
	commitBeforeMerge = true
	detachedHead = true

[checkout]
	defaultRemote = origin
