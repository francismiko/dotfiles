# =============================================================================
# Git 全局配置 (chezmoi 模板)
#
# 模板变量:
#   .chezmoi.hostname  - 当前主机名 ({{ .chezmoi.hostname }})
#   .chezmoi.os        - 操作系统 ({{ .chezmoi.os }})
#   .is_server         - 是否为服务器 ({{ .is_server }})
#   .is_work           - 是否为工作电脑 ({{ .is_work }})
#
# 使用说明:
#   - 此文件是模板，会根据不同机器生成不同配置
#   - 修改请使用: chezmoi edit ~/.gitconfig
# =============================================================================

[user]
	name = francismiko
	email = 1485059943@qq.com
	# SSH 签名密钥 (Secretive 管理)
	# 动态从 Secretive 读取当前机器的公钥
	# 使用 key:: 前缀格式
	signingkey = key::{{ output "sh" "-c" "SSH_AUTH_SOCK=/Users/francis/Library/Containers/com.maxgoedjen.Secretive.SecretAgent/Data/socket.ssh ssh-add -L" | trim }}

[commit]
	# 自动对所有提交进行签名
	gpgsign = true

[gpg]
	# 使用 SSH 格式签名 (而非传统 GPG)
	format = ssh

[gpg "ssh"]
	# 允许的签名者列表文件
	allowedSignersFile = ~/.gitallowedsigners
	# SSH 签名程序 (使用包装脚本设置正确的 SSH_AUTH_SOCK)
	program = ~/.local/bin/ssh-secretive

[pull]
	rebase = false

[merge]
	rebase = false
	conflictstyle = diff3

# Delta - 现代化 diff 工具
[core]
	pager = delta

[interactive]
	diffFilter = delta --color-only

[delta]
	navigate = true
	light = false
	line-numbers = true
	side-by-side = false
	syntax-theme = Monokai Extended

[diff]
	colorMoved = default

# HTTP/HTTPS 代理配置
# 用于加速 GitHub 等国外仓库访问
[https]
	proxy = http://127.0.0.1:7897

[http]
	proxy = http://127.0.0.1:7897

# 安全防护配置
[advice]
	statusHints = true
	pushUpdateRejected = true
	commitBeforeMerge = true
	detachedHead = true

[checkout]
	defaultRemote = origin
